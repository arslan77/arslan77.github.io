<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arslan's Career Quest â€” Pixel Platformer</title>
    <style>
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            background: #1a1a2e;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        /* Scanlines overlay */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, .15) 2px, rgba(0, 0, 0, .15) 4px);
            pointer-events: none;
            z-index: 100;
        }

        /* HUD bar */
        #hud {
            width: 800px;
            max-width: 100vw;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: #0f0f1a;
            border: 2px solid #4a4a8a;
            border-bottom: none;
            color: #e0d060;
            font-size: 14px;
            letter-spacing: 1px;
            image-rendering: pixelated;
        }

        #hud .lives {
            color: #ff6b6b
        }

        #hud .score {
            text-align: center
        }

        #hud .back a {
            color: #a0a0ff;
            text-decoration: none;
            font-size: 12px;
            letter-spacing: 1px;
        }

        #hud .back a:hover {
            color: #fff
        }

        /* Canvas */
        #game-canvas {
            display: block;
            width: 800px;
            max-width: 100vw;
            height: 400px;
            max-height: 50vw;
            border: 2px solid #4a4a8a;
            image-rendering: pixelated;
            cursor: pointer;
        }

        /* Info box below canvas */
        #info-box {
            width: 800px;
            max-width: 100vw;
            background: #0f0f1a;
            border: 2px solid #4a4a8a;
            border-top: none;
            padding: 12px 16px;
            min-height: 80px;
            color: #a0e0a0;
            font-size: 13px;
            letter-spacing: .5px;
            line-height: 1.6;
        }

        #info-box .info-title {
            color: #e0d060;
            font-size: 15px;
            margin-bottom: 4px;
            letter-spacing: 2px
        }

        #info-box .info-role {
            color: #80c0ff;
            margin-bottom: 2px
        }

        #info-box .info-tech {
            color: #c0a0ff;
            font-size: 12px
        }

        /* Controls hint */
        #controls {
            width: 800px;
            max-width: 100vw;
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 8px 0;
            color: #4a4a8a;
            font-size: 11px;
            letter-spacing: 1px;
        }

        .ctrl-key {
            border: 1px solid #4a4a8a;
            padding: 2px 8px;
            border-radius: 2px;
            color: #6a6aaa;
        }

        /* Start screen */
        #start-screen {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div id="hud">
        <div class="lives">â¤ï¸ <span id="lives-val">3</span></div>
        <div class="score">
            <div>SCORE: <span id="score-val">0</span></div>
            <div style="font-size:10px;color:#6a6aaa">CAREER QUEST v1.0</div>
        </div>
        <div class="back"><a href="lab.html">â† LAB</a></div>
    </div>
    <canvas id="game-canvas" width="800" height="400"></canvas>
    <div id="info-box">
        <div class="info-title" id="info-title">PRESS SPACE OR CLICK TO START</div>
        <div class="info-role" id="info-role">A pixelated journey through Arslan's career</div>
        <div class="info-tech" id="info-tech">â† â†’ to move Â· SPACE to jump Â· collect â˜… stars to unlock career milestones
        </div>
    </div>
    <div id="controls">
        <span><span class="ctrl-key">â†</span><span class="ctrl-key">â†’</span> Move</span>
        <span><span class="ctrl-key">SPACE</span> / <span class="ctrl-key">â†‘</span> Jump</span>
        <span><span class="ctrl-key">R</span> Restart</span>
    </div>

    <script>
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;

        // â”€â”€ PALETTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const C = {
            sky: '#1a1a2e', sky2: '#16213e',
            ground: '#4a4a8a', ground2: '#2d2d5a', ground3: '#1e1e40',
            player: '#e0d060', playerDark: '#b0a030',
            star: '#ffd700', starGlow: 'rgba(255,215,0,.3)',
            platform: '#5a5aaa', platformTop: '#7a7abb',
            coin: '#f0a000', coinGlow: 'rgba(240,160,0,.3)',
            text: '#e0e0ff', accent: '#80c0ff',
            bg1: '#0f0f2a', bg2: '#1a1a3e',
            // Level colors
            lvl: ['#2a1a3e', '#1a2a1e', '#2a2a0a', '#1e1a2e', '#0a1a2e'],
        };

        // â”€â”€ GAME STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const W = 800, H = 400;
        let gameState = 'start'; // start | playing | levelComplete | gameover
        let score = 0, lives = 3, level = 0;
        let stars = 0, starsNeeded = 3;
        let levelTimer = 0;

        // â”€â”€ CAREER LEVELS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const LEVELS = [
            {
                name: 'BRAINYLOFT Â· 2017', role: 'Software Engineer',
                tech: 'Laravel Â· Vue.js Â· Redis',
                bgTop: '#0a101e', bgBot: '#151e32', groundColor: '#3a3a7a',
                platforms: [{ x: 400, y: 300, w: 120 }, { x: 200, y: 240, w: 100 }, { x: 600, y: 260, w: 100 }, { x: 120, y: 180, w: 80 }],
                stars: [{ x: 220, y: 200 }, { x: 430, y: 260 }, { x: 620, y: 220 }],
                desc: 'First professional role â€” full stack web development across Lahore and Philadelphia.',
            },
            {
                name: 'LEARNOBOTS Â· 2018', role: 'Lead Software Engineer',
                tech: 'Django Â· Kubernetes Â· AWS IoT Â· Node.js',
                bgTop: '#0a1e0a', bgBot: '#152a15', groundColor: '#3a5a3a',
                platforms: [{ x: 150, y: 310, w: 120 }, { x: 350, y: 260, w: 100 }, { x: 550, y: 300, w: 120 }, { x: 680, y: 220, w: 80 }, { x: 250, y: 200, w: 80 }],
                stars: [{ x: 170, y: 270 }, { x: 370, y: 220 }, { x: 700, y: 180 }],
                desc: 'Led team of 3. Built LearnOSTEAM edtech (50+ schools) + POULTA IoT (500+ devices).',
            },
            {
                name: 'CAREEM Â· UBER Â· 2022', role: 'Sr. Software Engineer I',
                tech: 'Spring Boot Â· Laravel Â· MongoDB Â· Redis',
                bgTop: '#1e0a0a', bgBot: '#2a1515', groundColor: '#5a3a3a',
                platforms: [{ x: 100, y: 320, w: 100 }, { x: 280, y: 270, w: 80 }, { x: 430, y: 230, w: 120 }, { x: 600, y: 280, w: 100 }, { x: 700, y: 200, w: 80 }],
                stars: [{ x: 115, y: 280 }, { x: 450, y: 190 }, { x: 620, y: 240 }],
                desc: 'Gamified driver retention system â€” 2 microservices, millions of events per day.',
            },
            {
                name: 'HUNGERSTATION Â· 2023', role: 'Senior Software Engineer',
                tech: 'Go Â· gRPC Â· GKE Â· Pub/Sub Â· PostgreSQL',
                bgTop: '#1e1a0a', bgBot: '#2a2515', groundColor: '#5a5a2a',
                platforms: [{ x: 50, y: 330, w: 80 }, { x: 200, y: 290, w: 100 }, { x: 380, y: 240, w: 80 }, { x: 520, y: 280, w: 100 }, { x: 660, y: 230, w: 120 }, { x: 320, y: 190, w: 60 }],
                stars: [{ x: 220, y: 250 }, { x: 540, y: 240 }, { x: 680, y: 190 }],
                desc: 'Building Go microservices for 50+ restaurant integrations. Current role in Dubai ğŸ‡¦ğŸ‡ª',
            },
        ];

        // â”€â”€ PLAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const player = {
            x: 60, y: 300, w: 24, h: 32,
            vx: 0, vy: 0,
            onGround: false,
            dir: 1, // 1=right,-1=left
            frame: 0, frameTimer: 0,
        };
        const GRAVITY = 0.5, JUMP = -11, SPEED = 3.5, GROUND = H - 48;

        // â”€â”€ LEVEL OBJECTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        let platforms = [], starObjs = [], particles = [];

        function initLevel(lvl) {
            const L = LEVELS[lvl];
            platforms = [{ x: 0, y: GROUND, w: W, h: 48, color: L.groundColor }]; // ground
            L.platforms.forEach(p => platforms.push({ x: p.x, y: p.y, w: p.w, h: 14, color: L.groundColor }));
            starObjs = L.stars.map(s => ({ x: s.x, y: s.y, r: 10, collected: false, pulse: Math.random() * Math.PI * 2 }));
            particles = [];
            player.x = 60; player.y = GROUND - player.h;
            player.vx = 0; player.vy = 0;
            stars = 0;
            levelTimer = 0;
            updateInfo(L);
        }

        function updateInfo(L) {
            document.getElementById('info-title').textContent = L.name;
            document.getElementById('info-role').textContent = L.role;
            document.getElementById('info-tech').textContent = 'Stack: ' + L.tech + '  Â·  ' + L.desc;
        }

        // â”€â”€ INPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const keys = {};
        document.addEventListener('keydown', e => {
            keys[e.code] = true;
            if (e.code === 'Space' || e.code === 'ArrowUp') e.preventDefault();
            if (e.code === 'Space') {
                if (gameState === 'start') { startGame(); return; }
                if (gameState === 'levelComplete') { nextLevel(); return; }
                if (gameState === 'gameover') { restartGame(); return; }
            }
            if (e.code === 'KeyR') restartGame();
        });
        document.addEventListener('keyup', e => { keys[e.code] = false; });
        canvas.addEventListener('click', () => {
            if (gameState === 'start') { startGame(); }
            else if (gameState === 'levelComplete') { nextLevel(); }
            else if (gameState === 'gameover') { restartGame(); }
            else {
                if (player.onGround) { player.vy = JUMP; }
            }
        });

        function startGame() { gameState = 'playing'; level = 0; score = 0; lives = 3; initLevel(0); updateHUD(); }
        function nextLevel() { level++; if (level >= LEVELS.length) { gameState = 'gameover'; } else { gameState = 'playing'; initLevel(level); } }
        function restartGame() { gameState = 'playing'; level = 0; score = 0; lives = 3; initLevel(0); updateHUD(); }
        function updateHUD() { document.getElementById('score-val').textContent = score; document.getElementById('lives-val').textContent = lives; }

        // â”€â”€ PARTICLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function spawnParticles(x, y, color) {
            for (let i = 0; i < 12; i++) {
                particles.push({
                    x, y,
                    vx: (Math.random() - 0.5) * 5,
                    vy: (Math.random() - 0.5) * 5 - 2,
                    life: 1, color,
                    size: 3 + Math.random() * 4,
                });
            }
        }

        // â”€â”€ UPDATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function update() {
            if (gameState !== 'playing') return;
            levelTimer++;

            // Move
            if (keys['ArrowLeft'] || keys['KeyA']) { player.vx = -SPEED; player.dir = -1; }
            else if (keys['ArrowRight'] || keys['KeyD']) { player.vx = SPEED; player.dir = 1; }
            else player.vx *= 0.7;
            if ((keys['Space'] || keys['ArrowUp']) && player.onGround) { player.vy = JUMP; }

            // Physics
            player.vy += GRAVITY;
            player.x += player.vx;
            player.y += player.vy;
            player.onGround = false;

            // Collide with platforms
            platforms.forEach(p => {
                const overlapX = player.x + player.w > p.x && player.x < p.x + p.w;
                const wasAbove = player.y + player.h - player.vy <= p.y + 2;
                if (overlapX && player.y + player.h >= p.y && player.y < p.y + p.h && wasAbove && player.vy >= 0) {
                    player.y = p.y - player.h; player.vy = 0; player.onGround = true;
                }
            });

            // Walls
            if (player.x < 0) player.x = 0;
            if (player.x + player.w > W) player.x = W - player.w;

            // Fell off
            if (player.y > H + 100) {
                lives--; updateHUD();
                if (lives <= 0) gameState = 'gameover';
                else { player.x = 60; player.y = GROUND - player.h; player.vy = 0; }
            }

            // Stars
            starObjs.forEach(s => {
                if (s.collected) return;
                s.pulse += 0.08;
                const dx = player.x + player.w / 2 - s.x, dy = player.y + player.h / 2 - s.y;
                if (Math.hypot(dx, dy) < s.r + 14) {
                    s.collected = true; stars++;
                    score += 100; updateHUD();
                    spawnParticles(s.x, s.y, '#ffd700');
                    if (stars >= starsNeeded) setTimeout(() => { gameState = 'levelComplete'; }, 500);
                }
            });

            // Particles
            particles.forEach(p => { p.x += p.vx; p.y += p.vy; p.vy += 0.2; p.life -= 0.04; });
            particles = particles.filter(p => p.life > 0);

            // Frame
            if (Math.abs(player.vx) > 0.3) { player.frameTimer++; if (player.frameTimer > 8) { player.frame = (player.frame + 1) % 2; player.frameTimer = 0; } }
            else player.frame = 0;
        }

        // â”€â”€ DRAW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function drawPixel(x, y, w, h, color) { ctx.fillStyle = color; ctx.fillRect(Math.round(x), Math.round(y), w, h); }

        function drawPlayer() {
            const px = Math.round(player.x), py = Math.round(player.y);
            const d = player.dir;
            // Body
            drawPixel(px + 4, py + 8, 16, 18, C.player);
            // Head
            drawPixel(px + 4, py + 0, 16, 10, C.player);
            // Eyes
            const ex = d > 0 ? px + 14 : px + 6;
            drawPixel(ex, py + 3, 4, 4, '#1a1a2e');
            // Hair
            drawPixel(px + 4, py + 0, 16, 3, C.playerDark);
            // Arms (animated)
            const armY = player.frame === 0 ? py + 10 : py + 12;
            drawPixel(px + 0, armY, 4, 10, C.player);
            drawPixel(px + 20, armY, 4, 10, C.player);
            // Legs
            const legOff = player.frame === 0 ? 0 : 2;
            drawPixel(px + 5, py + 24, 8, legOff + 8, C.playerDark);
            drawPixel(px + 13, py + 24, 8, (legOff === 0 ? 2 : 0) + 8, C.playerDark);
        }

        function drawStar(s, t) {
            if (s.collected) return;
            const glow = 0.5 + 0.5 * Math.sin(s.pulse);
            ctx.save();
            ctx.globalAlpha = 0.3 * glow;
            ctx.fillStyle = C.starGlow;
            ctx.beginPath(); ctx.arc(s.x, s.y, 18, 0, Math.PI * 2); ctx.fill();
            ctx.globalAlpha = 1;
            // Pixelated star
            const ox = s.x - 8, oy = s.y - 8;
            const star = [
                [0, 0, 0, 1, 1, 0, 0, 0],
                [0, 0, 0, 1, 1, 0, 0, 0],
                [1, 1, 1, 1, 1, 1, 1, 1],
                [0, 1, 1, 1, 1, 1, 1, 0],
                [0, 1, 1, 1, 1, 1, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 1],
                [0, 0, 0, 1, 1, 0, 0, 0],
                [0, 0, 0, 1, 1, 0, 0, 0],
            ];
            star.forEach((row, ry) => row.forEach((px, rx) => {
                if (px) { ctx.fillStyle = glow > 0.7 ? '#fff' : '#ffd700'; ctx.fillRect(ox + rx * 2, oy + ry * 2, 2, 2); }
            }));
            ctx.restore();
        }

        function drawPlatform(p) {
            ctx.fillStyle = p.color || C.platform; ctx.fillRect(p.x, p.y, p.w, p.h);
            // Top highlight
            ctx.fillStyle = p.color ? lighten(p.color) : C.platformTop; ctx.fillRect(p.x, p.y, p.w, 3);
            // Bottom shadow
            ctx.fillStyle = 'rgba(0,0,0,.4)'; ctx.fillRect(p.x, p.y + p.h - 3, p.w, 3);
        }

        function lighten(hex) {
            const r = Math.min(255, parseInt(hex.slice(1, 3), 16) + 40);
            const g = Math.min(255, parseInt(hex.slice(3, 5), 16) + 40);
            const b = Math.min(255, parseInt(hex.slice(5, 7), 16) + 40);
            return `rgb(${r},${g},${b})`;
        }

        function drawBG() {
            const L = LEVELS[level >= LEVELS.length ? LEVELS.length - 1 : level];
            const grad = ctx.createLinearGradient(0, 0, 0, H);
            grad.addColorStop(0, L.bgTop || C.sky);
            grad.addColorStop(1, L.bgBot || C.sky2);
            ctx.fillStyle = grad; ctx.fillRect(0, 0, W, H);
            // Stars in bg
            ctx.fillStyle = 'rgba(255,255,255,.4)';
            for (let i = 0; i < 40; i++) {
                const bx = (i * 137.5) % W, by = (i * 73.1) % 200;
                ctx.fillRect(Math.round(bx), Math.round(by), 1, 1);
            }
        }

        function drawHUD2() {
            ctx.fillStyle = 'rgba(0,0,0,.5)'; ctx.fillRect(0, 0, W, 28);
            ctx.fillStyle = C.accent; ctx.font = 'bold 13px "Courier New"';
            ctx.fillText(`STARS: ${stars}/${starsNeeded}`, 10, 18);
            ctx.textAlign = 'center'; ctx.fillText(`LEVEL ${level + 1}: ${LEVELS[Math.min(level, LEVELS.length - 1)].name}`, W / 2, 18);
            ctx.textAlign = 'right'; ctx.fillText(`SCORE ${score}`, W - 10, 18);
            ctx.textAlign = 'left';
        }

        function drawOverlay(title, sub, btn) {
            ctx.fillStyle = 'rgba(0,0,0,.75)'; ctx.fillRect(0, 0, W, H);
            ctx.textAlign = 'center';
            ctx.fillStyle = '#ffd700'; ctx.font = 'bold 32px "Courier New"'; ctx.fillText(title, W / 2, H / 2 - 40);
            ctx.fillStyle = '#a0e0a0'; ctx.font = '14px "Courier New"'; ctx.fillText(sub, W / 2, H / 2);
            ctx.fillStyle = 'rgba(255,255,255,.15)'; ctx.fillRect(W / 2 - 100, H / 2 + 20, 200, 36);
            ctx.fillStyle = '#e0d060'; ctx.font = 'bold 14px "Courier New"'; ctx.fillText(btn, W / 2, H / 2 + 43);
            ctx.textAlign = 'left';
        }

        function draw() {
            drawBG();
            platforms.forEach(drawPlatform);
            starObjs.forEach(s => drawStar(s, levelTimer));
            drawPlayer();
            particles.forEach(p => {
                ctx.save(); ctx.globalAlpha = p.life;
                ctx.fillStyle = p.color; ctx.fillRect(p.x - p.size / 2, p.y - p.size / 2, p.size, p.size);
                ctx.restore();
            });
            drawHUD2();

            if (gameState === 'start') drawOverlay('CAREER QUEST', 'Navigate Arslan\'s engineering journey', '[ SPACE / CLICK TO START ]');
            if (gameState === 'levelComplete') {
                const L = LEVELS[Math.min(level, LEVELS.length - 1)];
                drawOverlay(`LEVEL CLEAR!`, `${L.name} â€” ${L.role}`, '[ SPACE / CLICK FOR NEXT LEVEL ]');
            }
            if (gameState === 'gameover') {
                const msg = level >= LEVELS.length ? 'You\'ve explored all career milestones!' : 'Try again?';
                drawOverlay(level >= LEVELS.length ? 'CAREER COMPLETE! ğŸ‰' : 'GAME OVER', msg, `[ SCORE: ${score} â€” SPACE TO RESTART ]`);
            }
        }

        // â”€â”€ LOOP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function loop() { requestAnimationFrame(loop); update(); draw(); }
        loop();
    </script>
</body>

</html>